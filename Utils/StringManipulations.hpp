#ifndef TESTPROJECT_STRINGMANIPULATIONS_HPP
#define TESTPROJECT_STRINGMANIPULATIONS_HPP

#include <iostream>
#include <sstream>

#include "../Core/MemoryBlock.hpp"


class StringManipulations
{
    static constexpr auto ADDRESS_SEPARATOR = "-";

public:
    StringManipulations() = delete;

    static MemoryBlock separateMemoryBlockFromMaps(std::string& line)
    {
        MemoryBlock mem_block;
        size_t index_separator = line.find(ADDRESS_SEPARATOR);
        size_t addr_length = index_separator;

        std::string start_str = line.substr(0, addr_length);
        std::string end_str = line.substr(addr_length + 1, start_str.length());

        std::stringstream ss;
        ss << std::hex << start_str;
        ss >> mem_block.start_addr;

        ss.clear();
        ss << std::hex << end_str;
        ss >> mem_block.end_addr;

        return mem_block;
    }

    static pid_t SeperatedParentIdFromStat(const std::string& stat_line)
    {
        // parent id always displayed 4 chars after its name in stat file
        std::string ppid_str = stat_line.substr(stat_line.find(")") + 4);

        return std::stoi(ppid_str);
    }
};

#endif //TESTPROJECT_STRINGMANIPULATIONS_HPP
